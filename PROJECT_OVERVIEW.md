# LSI Calculator - ะัะฐัะบะธะน ะพะฑะทะพั ะฟัะพะตะบัะฐ

## ๐ฏ ะงัะพ ััะพ?

Flutter ะฟัะธะปะพะถะตะฝะธะต ะดะปั ัะฐััะตัะฐ LSI (ะธะฝะดะตะบั ะฝะฐัััะตะฝะธั ะะฐะฝะถะตะปัะต) - ัะธะผะธัะตัะบะพะณะพ ะฟะพะบะฐะทะฐัะตะปั ะฒะพะดั ะฒ ะฑะฐััะตะนะฝะฐั.

---

## ๐๏ธ ะััะธัะตะบัััะฐ ะฒ ะบะฐััะธะฝะบะฐั

### ะฃะฟัะพัะตะฝะฝะฐั ััะตะผะฐ MVVM:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     VIEW                               โ
โ  (LSICalculatorScreen)                                 โ
โ  - ะะพะบะฐะทัะฒะฐะตั ัะพัะผั                                    โ
โ  - ะัะพะฑัะฐะถะฐะตั ัะตะทัะปััะฐัั                               โ
โ  - ะะ ัะพะดะตัะถะธั ะฑะธะทะฝะตั-ะปะพะณะธะบะธ                          โ
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ ะะพะดะฟะธััะฒะฐะตััั ะฝะฐ State (ref.watch)
                 โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   VIEWMODEL                            โ
โ  (LSIFormNotifier + LSIResultNotifier)                โ
โ  - ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั                                    โ
โ  - ะฃะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ                               โ
โ  - ะัะทะพะฒั API                                          โ
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ ะัะฟะพะปัะทัะตั
                 โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              SERVICES + MODELS                         โ
โ  Services: LSIApiService, TokenStorageService         โ
โ  Models: LSIParameters, LSIResult, ColorsResponse      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฆ ะกะพััะฐะฒะปัััะธะต ะฟัะพะตะบัะฐ

### 1๏ธโฃ **Models** (ะะพะดะตะปะธ ะดะฐะฝะฝัั)

ะงะธัััะต ะบะปะฐััั ะดะฐะฝะฝัั ะฑะตะท ะปะพะณะธะบะธ:

- `LSIParameters` - ะฒัะพะดะฝัะต ะฟะฐัะฐะผะตััั (14 ะฟะพะปะตะน: 7 ัะตะบััะธั + 7 ะถะตะปะฐะตะผัั)
- `LSIResult` - ัะตะทัะปััะฐั ัะฐััะตัะฐ (current, desired LSI)
- `ColorsResponse` - ัะฒะตัะฐ ะดะปั ะฒะธะทัะฐะปัะฝะพะน ะธะฝะดะธะบะฐัะธะธ

### 2๏ธโฃ **Services** (ะกะตัะฒะธัั)

ะะธะทะฝะตั-ะปะพะณะธะบะฐ ัะฐะฑะพัั ั API ะธ ััะฐะฝะธะปะธัะตะผ:

- `LSIApiService` - ะทะฐะฟัะพัั ะบ Orenda API
  - ะะฒัะพะผะฐัะธัะตัะบะฐั ะฐััะตะฝัะธัะธะบะฐัะธั ัะตัะตะท Dio Interceptors
  - ะะฑะฝะพะฒะปะตะฝะธะต ัะพะบะตะฝะฐ ะฟัะธ 401 ะพัะธะฑะบะต
- `TokenStorageService` - ะฑะตะทะพะฟะฐัะฝะพะต ััะฐะฝะตะฝะธะต ัะพะบะตะฝะพะฒ ะฒ Secure Storage

### 3๏ธโฃ **ViewModels** (ะฃะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ)

ะะฒะฐ StateNotifier'ะฐ ะดะปั ัะฐะทะดะตะปะตะฝะธั ะพัะฒะตัััะฒะตะฝะฝะพััะธ:

- `LSIFormNotifier` - ัะฟัะฐะฒะปัะตั ัะพัะผะพะน ะธ ะฒะฐะปะธะดะฐัะธะตะน
- `LSIResultNotifier` - ัะฟัะฐะฒะปัะตั ัะตะทัะปััะฐัะฐะผะธ ัะฐััะตัะฐ

### 4๏ธโฃ **Views** (UI)

- `LSICalculatorScreen` - ะณะปะฐะฒะฝัะน ัะบัะฐะฝ (ConsumerWidget)
- `InputField` - ะฟะตัะตะธัะฟะพะปัะทัะตะผะพะต ะฟะพะปะต ะฒะฒะพะดะฐ
- `LSIResultCard` - ะพัะพะฑัะฐะถะตะฝะธะต ัะตะทัะปััะฐัะพะฒ ั ัะฒะตัะฐะผะธ

---

## ๐ ะะฐะบ ัะฐะฑะพัะฐะตั ะฟะพัะพะบ ะดะฐะฝะฝัั?

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะพะดะธั ะดะฐะฝะฝัะต โ InputField
2. InputField โ onChanged callback
3. Screen ะฒัะทัะฒะฐะตั โ viewModel.updateParameter()
4. ViewModel ะฒะฐะปะธะดะธััะตั โ ะพะฑะฝะพะฒะปัะตั state
5. State ะธะทะผะตะฝัะตััั โ UI ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฑะฝะพะฒะปัะตััั (Riverpod)
6. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "ะะฐัััะธัะฐัั"
7. ViewModel โ ะฒัะทัะฒะฐะตั LSIApiService.calculateLSI()
8. API ะฒะพะทะฒัะฐัะฐะตั ัะตะทัะปััะฐั โ ViewModel ัะพััะฐะฝัะตั ะฒ state
9. UI ะฟะพะบะฐะทัะฒะฐะตั ัะตะทัะปััะฐั
```

---

## ๐ก๏ธ ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ

### โ ะะตะทะพะฟะฐัะฝะพััั

- ะขะพะบะตะฝั ะฒ Secure Storage (ัะธััััััั ะฝะฐ ััะพะฒะฝะต ะะก)
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ัะพะบะตะฝะฐ ะฟัะธ ะธััะตัะตะฝะธะธ

### โ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

- ะขะฐะนะผะฐััั ะฝะฐ ะฒัะต ะทะฐะฟัะพัั
- Graceful degradation (ัะฐะฑะพัะฐะตั ะดะฐะถะต ะตัะปะธ ัะฒะตัะฐ ะฝะต ะทะฐะณััะทะธะปะธัั)
- ะะพะฝััะฝัะต ัะพะพะฑัะตะฝะธั ะพะฑ ะพัะธะฑะบะฐั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั

### โ ะะฐัะตััะฒะพ ะบะพะดะฐ

- MVVM ะฐััะธัะตะบัััะฐ
- Type-safe (null-safety)
- Immutable state
- ะะตัะตะธัะฟะพะปัะทัะตะผัะต ะบะพะผะฟะพะฝะตะฝัั

---

## ๐ง ะขะตัะฝะพะปะพะณะธะธ

| ะงัะพ                        | ะะฐัะตะผ                           |
| -------------------------- | ------------------------------- |
| **Riverpod**               | State management (ัะตะฐะบัะธะฒะฝะพััั) |
| **Dio**                    | HTTP ะบะปะธะตะฝั ั interceptors      |
| **flutter_secure_storage** | ะะตะทะพะฟะฐัะฝะพะต ััะฐะฝะตะฝะธะต ัะพะบะตะฝะพะฒ     |
| **json_serializable**      | ะะฒัะพะผะฐัะธัะตัะบะฐั ัะตัะธะฐะปะธะทะฐัะธั     |

---

## ๐ ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
lib/
โโโ constants/        # API ะบะพะฝััะฐะฝัั (URL, ัะพะบะตะฝั)
โโโ models/          # Data ะบะปะฐััั (LSIParameters, LSIResult...)
โโโ services/        # API ะธ storage ัะตัะฒะธัั
โโโ viewmodels/      # StateNotifier'ั (ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ)
โโโ views/           # ะญะบัะฐะฝั (UI)
โโโ widgets/         # ะะตัะตะธัะฟะพะปัะทัะตะผัะต ะบะพะผะฟะพะฝะตะฝัั
```

---

## ๐ก ะะปะฐะฒะฝัะต ะฟัะธะฝัะธะฟั ะฐััะธัะตะบัััั

1. **Separation of Concerns** - ะบะฐะถะดัะน ัะปะพะน ะพัะฒะตัะฐะตั ะทะฐ ัะฒะพะต
2. **Single Responsibility** - ะพะดะธะฝ ะบะปะฐัั = ะพะดะฝะฐ ะทะฐะดะฐัะฐ
3. **DRY** - ะฟะตัะตะธัะฟะพะปัะทัะตะผัะต ะบะพะผะฟะพะฝะตะฝัั (InputField, Services)
4. **Immutability** - ะฑะตะทะพะฟะฐัะฝัะต ะพะฑะฝะพะฒะปะตะฝะธั ัะตัะตะท copyWith()
5. **Type Safety** - null-safety, ัััะพะณะฐั ัะธะฟะธะทะฐัะธั

---

## ๐ ะะปั ะฟะพะฝะธะผะฐะฝะธั ะฟัะพะตะบัะฐ

**ะะฐัะฝะธ ั:**

1. `main.dart` - ัะพัะบะฐ ะฒัะพะดะฐ, ะธะฝะธัะธะฐะปะธะทะฐัะธั
2. `lsi_calculator_screen.dart` - ะณะปะฐะฒะฝัะน ัะบัะฐะฝ (View)
3. `lsi_calculator_viewmodel.dart` - ะปะพะณะธะบะฐ (ViewModel)
4. `lsi_api_service.dart` - ัะฐะฑะพัะฐ ั API (Service)

**ะะพัะพะผ ะธะทััะธ:**

- Models ะดะปั ะฟะพะฝะธะผะฐะฝะธั ััััะบัััั ะดะฐะฝะฝัั
- Widgets ะดะปั ะฟะพะฝะธะผะฐะฝะธั UI ะบะพะผะฟะพะฝะตะฝัะพะฒ
- Services ะดะปั ะฟะพะฝะธะผะฐะฝะธั API ะธะฝัะตะณัะฐัะธะธ

---

## โ ะัััััะต ะพัะฒะตัั

**ะะพัะตะผั ะดะฒะฐ StateNotifier?**
โ ะะฐะทะฝัะต ะพัะฒะตัััะฒะตะฝะฝะพััะธ: ัะพัะผะฐ vs ัะตะทัะปััะฐัั

**ะะพัะตะผั Interceptors?**
โ ะะฒัะพะผะฐัะธัะตัะบะฐั ะฐััะตะฝัะธัะธะบะฐัะธั ะฑะตะท ะดัะฑะปะธัะพะฒะฐะฝะธั ะบะพะดะฐ

**ะะพัะตะผั Secure Storage?**
โ ะขะพะบะตะฝั ะฝะต ะดะพะปะถะฝั ััะฐะฝะธัััั ะฒ ะพัะบัััะพะผ ะฒะธะดะต

**ะะพัะตะผั MVVM?**
โ ะะฐะทะดะตะปะตะฝะธะต UI ะธ ะปะพะณะธะบะธ, ัะตััะธััะตะผะพััั, ะผะฐัััะฐะฑะธััะตะผะพััั
